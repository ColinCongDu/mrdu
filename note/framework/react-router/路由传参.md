# 路由传参

react-router有3种传参方式。
- params传参。例如/user/:id。
    优点：刷新页面，参数不丢失。
    缺点：1.只能传递字符串。2.需要在路由上配置
- search params传参。例如/user?id=123
    优点：1.刷新页面，参数会丢失。2.不需要在路由上配置
- state传参。
    优点：可以传递对象。
    缺点：刷新页面，参数会丢失。


## params参数(动态路由)

1. 路由配置
```jsx
function App() {
    return (
        <Routes path="profile">
            <Route path=":id" element={<ProfilePage />} />
        </Routes>
    )
}
<Routes></Routes>
```
2. 传参
  
    ```jsx
        <Link to="/profile/123">Go to Profile</Link>
    ```

3. 获取参数
```jsx
import { useParams } from "react-router-dom";
   
function ProfilePage() {
    // 获取参数
    const { id } = useParams();
}
```

## search params参数

2. 获取参数
在react-router v6中，可以通过useSearchParams钩子函数来获取search params参数。
```jsx
    import { useSearchParams } from "react-router-dom";
    
    function ProfilePage() {
        // 获取参数
        const [searchParams, setSearchParams] = useSearchParams();
        const id = searchParams.get("id"); 
    }
```
而在react-router v5中，可以通过useLocation钩子函数来获取search params参数。
```jsx
    import { useLocation } from "react-router-dom";
    
    function ProfilePage() {
        // 获取参数 
        const { search } = useLocation();
        const id = new URLSearchParams(search).get("id");
    }
```
或者我们也可以把它封装成一个hook。
```jsx
    import { useLocation } from "react-router-dom";
    import { useMemo } from "react";
    
    function useSearchParams() {
        const { search } = useLocation();
        return useMemo(() => {
            const searchParams = new URLSearchParams(search);
            let params = {};
            for (const [key, value] of searchParams.entries()) {
                params[key] = value;
            }
            return params;
        }, [search]); 
    }
```

## state参数

1. 传参
```jsx
import { useNavigate } from "react-router-dom";
   
function App() {
    const navigate = useNavigate();
    navigate("/profile", { state: { id: 123 } });
}
```
2. 获取参数

```jsx
    import { useLocation } from "react-router-dom";
    
    function ProfilePage() {
        // 获取参数
        const { state } = useLocation();
        const id = state.id;
    }
```
   