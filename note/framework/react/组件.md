# 组件

React的组件分为两种：函数组件和类组件。 函数组件是一个Javascript函数，它接受一个props对象作为参数，并返回一个react元素；由于类组件目前已经不推荐使用，因此这里不说了。

下面是一个函数组件的例子。

```
// 定义了一个头像组件。
function Head(props) {    
    return (<div>             
        <img src="props.user.headUrl"></img>             
        <span>{props.user.userName}</span>            
        <div>); 
}  
```

需要注意的是：

- 组件名称必须以大写字母开头。React 会将以小写字母开头的组件视为原生 DOM 标签。例如，`<div/> `代表 HTML 的 div 标签，而`<Welcome/>` 则代表一个组件，并且需在作用域内使用 Welcome。

## 受控组件与非受控组件



在学习React过程中，我们必然能够看到受控组件与非受控组件的概念。也许初看官方文档或许的确有些令人迷茫的地方。那么什么是受控组件与非受控组件呢？

 在html元素中，通常能够与用户进行数据交互的就只有表单元素了，而在表单元素中，无论是能够接收用户输入文本数据的`<input/>`元素还是能够让用户进行选择的`<select/>`元素，它的内部都会维护一个变量，这个变量存储着用户交互的数据。而React为了实现数据的双向绑定，必然要将数据保存在自定义的state组件中。这种由React控制表单值的组件就被称为**受控组件**。

而并未将值保存在受React控制的变量中的表单元素，就被称为**非受控组件**。





https://tarojsx.github.io/blog/2020-06-25-what-is-react/

[5]: https://juejin.cn/post/6858276396968951822	"受控组件与非受控组件"
[6]: https://mp.weixin.qq.com/s/g1q-K5xDTV5nCB6H22L1Zg	"学好这些 React 设计模式，能让你的 React 项目飞起来"


## 组件的状态`state`

[state](https://zh-hans.reactjs.org/docs/state-and-lifecycle.html)也称为状态，根据组件是否存在state可以将组件分为有**状态组件**和**无状态组件**。有状态组件一般指的是类组件，而无状态的组件一般指的是函数组件。但是随着React Hoos的更新，函数组件也可以是有状态的。

在类组件中，构造函数是唯一可以为state赋值的地方。

```javascript
    constructor(props: any) {
        super(props);
        this.state = {
            topList: [],
        };
    }
```

使用state有两个需要注意的地方。

- 不要直接修改state。state的修改必须通过 `setState() `函数进行修改，否则组件不会被重新渲染。
 ```javascript
  // 不正确的做法
  this.state.topList = [{ a:  '1',  b: '2' }];
  
  // 正确做法
  this.setState({
      topList: []
  });
 ```

- state的更新可能是异步的。React可能会把多个setState合并成一个调用。因此当你调用了setState之后，state可能不会立刻更新。

#### 有状态组件和无状态组件的区别

#### 为什么State的更新是异步的 

https://juejin.cn/post/6844903715921477640


## 组件的渲染




在 React 中，直接为组件设置 `displayName` 属性的主要目的是提高调试和开发体验。React DevTools 会使用组件的 `displayName` 属性来显示组件的名称。如果没有显式设置 `displayName`，React 会尝试推断组件的名称，但在某些情况下（如高阶组件或匿名函数组件），推断的名称可能不准确或不可读。